(function() {
  var ToolConsumer, should;

  should = require('should');

  ToolConsumer = require('./toolconsumer');

  describe('ToolConsumer', function() {
    return describe('withSession() post()', function() {
      return it('should return some with valid arguments', function(done) {
        var consumer;
        consumer = new ToolConsumer(process.env.LTIJS_URL, process.env.LTIJS_CONSUMERKEY, process.env.LTIJS_CONSUMERSECRET);
        return consumer.withSession(function(session) {
          var payload;
          payload = {
            lti_version: 'LTI-1p0',
            lti_message_type: 'basic-lti-launch-request',
            resource_link_id: '0'
          };
          return session.basicLaunch(payload).then(function(response) {
            response.isSome.should.be["true"];
            return response.getOrElse('').indexOf('Context Information:').should.be.above(-1);
          }).done(function() {
            return done();
          });
        });
      });
    });
  });

}).call(this);
